<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Page 6 | Technocracy</title>
  <meta name="author" content="Eric Simmerman">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Technocracy"/>

  
    <meta property="og:image" content="undefined"/>
  

  
  
    <link href="/favicon.png" rel="icon">
  

  <!-- CSS -->
  <link rel="stylesheet" href="/css/themes/cerulean.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  



</head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
       <a class="navbar-brand" href="/">Technocracy</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 <div class="page-header page-header-inverse ">
  <h1 class="title title-inverse ">Posts on whatever your host deems relevant.</h1>
</div>

<div class="row page">

	
	<div class="col-md-9">
	

		<div class="slogan">
      <i class="fa fa-heart"></i>
      Yet another bootstrap theme.
</div>    
		<div id="top_search"></div>
		<div class="mypage">
		
		<!-- title and entry -->
		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2010-11-02 </div>
			<div class="article-title"><a href="/2010/11/02/2010-11-02-support-chroot-for-scp-connections-on/" >Support chroot for SCP connections on CentOS 5.5</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		
<div class="post">
<p>Many thanks to <a href="http://www.linuxquestions.org/questions/red-hat-31/my-version-of-ssh-doesnt-support-match-and-forcecommand-819436/" target="_blank" rel="external">anomie for posting this great writeup</a>. I've pasted it below to help spread the wealth.</p><p>-------</p><p>Here's a quick recipe for your chrooted sftp daemon:</p><p>1. Create the sftp init script - &lt;strong&gt;/etc/init.d/sftpfoo&lt;/strong&gt;<br><code>#!/bin/bash## chkconfig: 35 60 25# description: OpenSSH chrooted sftp only daemon## Note that /usr/sbin/sftpfoo is simply a symlink to /usr/sbin/sshd#</code></p><p>pidfile='/var/run/sftpfoo.pid'</p><p>case "${1}" in</p><p>start&nbsp; ) exec -a /usr/sbin/sftpfoo /usr/sbin/sshd -f /etc/ssh/sftpfoo_config<br>;;<br>stop&nbsp;&nbsp; ) kill -9 $(cat ${pidfile})<br>;;<br>restart) stop<br>sleep 3<br>start<br>;;<br>*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ) echo "Usage: ${0} (start|stop|restart)"<br>;;</p><p>esac</p><p>exit 0</p><p>2. Add it to chkconfig(8) consciousness and set up a symlink you'll need later.</p><p><code># chkconfig --add sftpfoo# ln -s /usr/sbin/sshd /usr/sbin/sftpfoo</code></p><p>3. Create your sftp config file - &lt;strong&gt;/etc/ssh/sftpfoo_config&lt;/strong&gt;</p><p><code>Port 8822Protocol 2AddressFamily inet</code></p><p>SyslogFacility AUTHPRIV<br>LogLevel INFO</p><p>PermitRootLogin no</p><p>RSAAuthentication no<br>PubkeyAuthentication no<br>RhostsRSAAuthentication no<br>HostbasedAuthentication no<br>PasswordAuthentication yes<br>PermitEmptyPasswords no<br>ChallengeResponseAuthentication no<br>KerberosAuthentication no<br>GSSAPIAuthentication no</p><p>UsePAM no</p><p>PidFile /var/run/sftpfoo.pid</p><p>ChrootDirectory /home/chrooted<br>Subsystem sftp internal-sftp</p><p>4. Create your first sftp-only user</p><p><code># useradd -d /nowhere -M -s /sbin/nologin baruser</code></p><p>5. Create the chroot directory</p><p><code># mkdir -p /home/chrooted &amp;amp;&amp;amp; chmod 755 /home/chrooted</code></p><p>6. Start the sftp service</p><p><code># service sftpfoo start</code><br>-------</p><p>Now, log in remotely as baruser, specifying port 8822. (Remember to poke a hole in your firewall for this port.)</p></div>

	
	</div>
  <a type="button" href="/2010/11/02/2010-11-02-support-chroot-for-scp-connections-on/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2010-10-29 </div>
			<div class="article-title"><a href="/2010/10/29/2010-10-29-resolving-sleep-issues-with-seagate/" >Resolving sleep issues with Seagate GoFlex Desk on Mac Snow Leopard</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		
<div class="post">
There are number of posts on Seagate's user forums describing <a href="http://forums.seagate.com/t5/FreeAgent-Products/How-to-stop-Seagate-FreeAgent-Desktop-Drives-from-going-to-sleep/m-p/8812" target="_blank" rel="external">frustration with the GoFlex line of external harddrive</a> and its <a href="http://forums.seagate.com/t5/FreeAgent-Products/FreeAgent-for-Mac-and-sleep/m-p/34138" target="_blank" rel="external">tendency to periodically eject/sleep</a> on Mac's Snow Leopard. I'm using the 2TB GoFlex as my Time Machine drive and needed to resolve this annoyance as well. I've opened a ticket with Seagate Support directly, but so far they've been unable to completely resolve the issue.The only thing that seems to help is to go into System Prefs -&gt; Energy Saver and turn off the feature that puts Hard Drives to sleep. With that power saving feature disabled the Seagate only complains when my Mac actually wakes from sleep - that's an improvement but still no love.</div>

	
	</div>
  <a type="button" href="/2010/10/29/2010-10-29-resolving-sleep-issues-with-seagate/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2010-08-26 </div>
			<div class="article-title"><a href="/2010/08/26/2010-08-26-how-to-undo-svn-commit-from-command-line/" >How to undo a SVN commit from the command line</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		
<div class="post">
<p>SVN 1.4 added a feature to support easy rollback of a SVN commit. It's documented in SVN help, but unfortunately SVN help only makes sense if you already understand what it's trying to explain. Here's the easy commit revert command to run against your working copy:</p><p>svn merge -c -[REV] [REPO]</p><p>Replace the brackets with the offending revision number and your SVN repository respectively. For example, to undo the changes made by revision 42:</p><p>svn merge -c -42 <a href="http://example.com/svn/trunk" target="_blank" rel="external">http://example.com/svn/trunk</a> .</p></div>

	
	</div>
  <a type="button" href="/2010/08/26/2010-08-26-how-to-undo-svn-commit-from-command-line/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2010-08-19 </div>
			<div class="article-title"><a href="/2010/08/19/2010-08-19-i-big-in-brazil/" >I&#39;m big in Brazil</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		
<div class="post">
<div class="p_embed p_image_embed"><img alt="Media_httpwwwericsimm_ndffj" height="224" src="http://ericsimmerman.files.wordpress.com/2010/08/media_httpwwwericsimm_ndffj-scaled500.jpg?w=300" width="300"></div></div>

	
	</div>
  <a type="button" href="/2010/08/19/2010-08-19-i-big-in-brazil/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2010-06-13 </div>
			<div class="article-title"><a href="/2010/06/13/2010-06-13-import-gnucash-data-into-moneydance/" >Import GnuCash data into MoneyDance</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		
<div class="post">
<a href="http://www.gnucash.org/" target="_blank" rel="external">GnuCash</a> served me well while I was running Ubuntu as my primary desktop but since moving to a Mac Pro I've been disappointed in the performance and non-native nature of the GnuCash Mac port. I decided to migrate to <a href="http://moneydance.com/" target="_blank" rel="external">MoneyDance</a> and was quickly dismayed to discover GnuCash's poor support for standards based exporting.This GnuCash wiki-entry <a href="http://wiki.gnucash.org/wiki/FAQ#Q:_How_can_I_export_data.3F" target="_blank" rel="external">describes a few convoluted approaches to data export</a> but the items it references are hopelessly outdated and generally do not function for the latest stable release - reason enough to ditch GnuCash.MoneyDance hadn't solved the problem on their end either but their wiki does <a href="http://moneydance.com/trac/wiki/Frequently_Asked_Questions#CanIimportmyGnuCashdata" target="_blank" rel="external">reference a Perl script that converts the deprecated GnuCash Postgre storage format into a MoneyDance XML file</a>. Since I knew that the development release of GnuCash supports a SQLite storage format I decided to see if I could update Sid Reed's aforementioned script for this new SQLite container.I'm no Perl Monger, but <a href="http://xkcd.com/208/" target="_blank" rel="external">I do know regular expressions</a>. My updated script worked well for me and seamlessly converted several years of GnuCash data.  Please read the pre-requisites section in the header of this&nbsp;<a href="http://www.ericsimmerman.com/wp-content/uploads/2010/06/GnuCash-MoneyDance-Importer.zip" target="_blank" rel="external">GnuCash to MoneyDance Migration Script</a> before attempting to run it. In addition to the linked zip archive, <a href="http://github.com/ets/MoneyDance-GnuCash-Importer" target="_blank" rel="external">this script is also available on github</a>. Enjoy!</div>

	
	</div>
  <a type="button" href="/2010/06/13/2010-06-13-import-gnucash-data-into-moneydance/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2010-06-08 </div>
			<div class="article-title"><a href="/2010/06/08/2010-06-08-activate-maven-profile-using-hudson/" >Activate a Maven Profile using Hudson</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		
<div class="post">
Environment properties weren't available to me on my Mac server for some reason. The solution I eventually adopted was the one used in the <a href="http://wiki.hudson-ci.org/display/HUDSON/Cobertura+Plugin" target="_blank" rel="external">Cobertura Plugin docs here</a>. Hudson by default defines a property BUILD_NUMBER which is used to enable the profile.<div class="CodeRay">  <div class="code"><pre>&lt;profile&gt;     &lt;id&gt;hudson&lt;/id&gt;     &lt;activation&gt;         &lt;property&gt;             &lt;name&gt;BUILD_NUMBER&lt;/name&gt;         &lt;/property&gt;     &lt;/activation&gt;        ...&lt;/profile&gt;</pre></div></div></div>

	
	</div>
  <a type="button" href="/2010/06/08/2010-06-08-activate-maven-profile-using-hudson/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2010-03-14 </div>
			<div class="article-title"><a href="/2010/03/14/2010-03-14-customize-article-row-count-for/" >Customize article row count for Cerberus public knowledgebase community</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		
<div class="post">
I've been evaluating the opensource <a href="http://www.cerberusweb.com/" target="_blank" rel="external">Cerberus Helpdesk</a> as an alternative to the closed source Kayako esupport. I like how Cerberus separates the creation of multiple knowledgebases that can then be published across multiple community portals. Instead of one comprehensive knowledgebase presented to all customers, I can use Cerberus to present product specific knowledgebases. It's a nice concept that should make it much easier for a customer to locate support information and thereby reduce the number of support tickets generated.Customizing the public facing portals for my Cerberus installation was straightforward.  The admin console provided a good degree of flexibility, but I wanted a bit more so I manually modified usermeet.core/templates/portal/sc/module/index.tpl in order to insert analytics scripts and some more detailed customization. That was easy, but my next mod proved more difficult. By default, Cerberus displays 10 articles on each page of search results and I wanted to increase that count to 20. Cerberus' architecture actually makes it a bit tricky to determine the control flow used by the community portals but I eventually traced the article retrieval flow to the DAO_KbArticle class in plugins/cerberusweb.kb/api/App.php and changed the default limit on the search method from 10 to 20. The limit is set as a hardcoded constant in the method signature....yuck. After the change, 20 articles were pulled from the database on each request, but there were still only 10 displayed in the portal.It took a lot of searching to find the missing piece and it was yet another hardcoded value in plugins/cerberusweb.kb/api/sc/kb.php where $view-&gt;renderLimit was set to 10. Changing this gave me the desired row count on the portal.The Cerberus team has put together a nice product but given that one of its core competitive features is its opensource nature, I'd like to see the codebase refactored to better facilitate this type of customization. Values like these limits could easily be defined in framework.config.php instead of scattering hardcoded settings across multiple files. That said, at least I had to option to manipulate the software - something I can't do with Kayako's offering.</div>

	
	</div>
  <a type="button" href="/2010/03/14/2010-03-14-customize-article-row-count-for/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2010-03-05 </div>
			<div class="article-title"><a href="/2010/03/05/2010-03-05-connecting-to-netscreen-series/" >Connecting to Netscreen Series (NetScreen-5) VPN with Mac OS X (Snow Leopard)</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		
<div class="post">
(Followup to my <a href="http://www.ericsimmerman.com/connecting_to_netscreen_series_netscreen/45/" target="_blank" rel="external">NetScreen-5 from Ubuntu article</a>) I recently struggled through the details of establishing a VPN connection from my Mac OS X desktop to a Juniper Networks Netscreen-5. Here's how I solved it. My Netscreen-5 was configured with some typical settings:Phase 1Pre-shared key "your-pre-shared-key-here"Encryption "pre-g2-aes128-sha"Phase 2 Encryption "g2-esp-3des-sha"To configure the client-side using an Ubuntu desktop, I used Racoon and KVpnc but didn't have the luxury of KVpnc on my Mac desktop so I had to manually edit my racoon.conf:<div class="CodeRay">  <div class="code"><pre>log debug2;path pre_shared_key &quot;/etc/racoon/psk.txt&quot;;path certificate &quot;/etc/racoon/certs&quot;;timer{        natt_keepalive 10 sec;}remote VPN.GATEWAY{        exchange_mode aggressive;        nat_traversal on;          ike_frag on;        peers_identifier asn1dn;        proposal_check obey;        my_identifier user_fqdn &quot;YOUR.EMAIL.ADDRESS&quot;;        proposal {                encryption_algorithm aes;                hash_algorithm sha1;                authentication_method pre_shared_key;                dh_group modp1024;        }}sainfo address DESKTOP.IP.ADDRESS/32 any address VPN.GATEWAY/28 any{        pfs_group modp1024;        encryption_algorithm 3des;        authentication_algorithm hmac_sha1;        compression_algorithm deflate;}listen{ adminsock &quot;/var/run/racoon.sock&quot; &quot;root&quot; &quot;operator&quot; 0660;}</pre></div></div></div>

	
	</div>
  <a type="button" href="/2010/03/05/2010-03-05-connecting-to-netscreen-series/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2010-02-23 </div>
			<div class="article-title"><a href="/2010/02/23/2010-02-23-select-max-value-of-numeric/" >Select max value of numeric CollectionOfElements with Hibernate</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		
<div class="post">
Consider a numeric CollectionOfElements held by a class Product such as:<div class="CodeRay">  <div class="code"><pre>@Entity(name=&quot;Product&quot;)public class Product {protected Set serialNumbers = new HashSet();@CollectionOfElements@JoinTable(name=&quot;product_serialnumbers&quot;)public Set getSerialNumbers() {  return serialNumbers;}public void setSerialNumbers(Set serialNumbers) {  this.serialNumbers = serialNumbers;}}</pre></div></div>You can use a NamedQuery to determine the maximum SerialNumber held by any Product like this:<div class="CodeRay">  <div class="code"><pre>@Entity(name=&quot;Product&quot;)@NamedQueries ({    @NamedQuery(        name = &quot;maxSerialNumber&quot;,        query = &quot;select max(elements(p.serialNumbers)) as value from Product p&quot;        )})public class Product {protected Set serialNumbers = new HashSet();@CollectionOfElements@JoinTable(name=&quot;product_serialnumbers&quot;)public Set getSerialNumbers() {  return serialNumbers;}public void setSerialNumbers(Set serialNumbers) {  this.serialNumbers = serialNumbers;}}</pre></div></div></div>

	
	</div>
  <a type="button" href="/2010/02/23/2010-02-23-select-max-value-of-numeric/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2010-01-18 </div>
			<div class="article-title"><a href="/2010/01/18/2010-01-18-eclipse-galileo-unable-to-read/" >Eclipse Galileo unable to read Subversion repository</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
	
	
		
<div class="post">
After a clean Snow Leopard install on a new machine, I fired up a fresh Galileo Eclipse and pointed it at a copy of my old workspace.&nbsp; I first encountered and resolved the missing Mac OS X JRE issue described in my last post, only to then find that my existing subversion repositories were inaccessible in the new Eclipse install. I hopefully added "-clean" as the first parameter of my eclipse.ini file and restarted but the situation remained unchanged. Undeterred, I launched eclipse from the command line with a -clean startup parameter and this did the trick:/Applications/&lt;your install dir/Eclipse.app/Contents/MacOS/eclipse -clean</div>

	
	</div>
  <a type="button" href="/2010/01/18/2010-01-18-eclipse-galileo-unable-to-read/#more" class="btn btn-default more">Read More</a>
</div>

		

		</div>

		<!-- pagination -->
		<div>
  		<center>
		<div class="pagination">
<ul class="pagination">
	 
		
    	<li class="prev"><a href="/page/5/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i> Prev</a></li>
  		

        <li><a href="/"><i class="fa fa-home"></i>Home</a></li>

		
		   <li class="next"> <a href="/page/7/" class="alignright next">Next<i class="fa fa-arrow-circle-o-right"></i></a> </li>          
        
	
</ul>
</div>

  		</center>
		</div>

		
		
	</div> <!-- col-md-9 -->

	
		<div class="col-md-3">
	<div id="sidebar">
	
			
  <div id="site_search">
   <div class="form-group">
    <input type="text" id="local-search-input" name="q" results="0" placeholder="Search" class="st-search-input st-default-search-input form-control"/>
   </div>  
  <div id="local-search-result"></div>
  </div>


		
			

		
			
<div class="widget">
  <h4>Recent Posts</h4>
  <ul class="entry list-unstyled">
    
      <li>
        <a href="/2015/08/10/2015-08-10-mysql-identifying-blocking-transactions/" ><i class="fa fa-file-o"></i>MySQL Identifying Blocking ...</a>
      </li>
    
      <li>
        <a href="/2015/01/07/2015-01-07-fix-yaml-parsing-errors-in-webgen/" ><i class="fa fa-file-o"></i>Fix YAML parsing errors in ...</a>
      </li>
    
      <li>
        <a href="/2014/02/01/2014-02-01-resolving-h2-table-lock-during-junitrunner-test/" ><i class="fa fa-file-o"></i>Resolving H2 table lock dur...</a>
      </li>
    
      <li>
        <a href="/2013/11/26/2013-11-26-moved-again-dot-dot-dot-this-time-to-github-dot-io/" ><i class="fa fa-file-o"></i>Moved again ... this time t...</a>
      </li>
    
      <li>
        <a href="/2013/10/29/2013-10-29-plesk-11-upgrade-unable-to-run-perl/" ><i class="fa fa-file-o"></i>Plesk 11 Upgrade Unable to ...</a>
      </li>
    
  </ul>
</div>

		
			
<div class="widget">
	<h4>Links</h4>
	<ul class="blogroll list-unstyled">
	
		<li><i class="fa fa-github"></i><a href="http://www.github.com/ets" title="My Github account." target="_blank"]);">My Github</a></li>
	
		<li><i class="fa fa-bitbucket"></i><a href="https://bitbucket.org/ets" title="My Github account." target="_blank"]);">My Bitbucket</a></li>
	
		<li><i class="fa fa-linkedin"></i><a href="http://www.linkedin.com/in/ericsimmerman" title="My Linkin account." target="_blank"]);">My LinkedIn</a></li>
	
	</ul>
</div>


		
	</div> <!-- sidebar -->
</div> <!-- col-md-3 -->

	
	
</div> <!-- row-fluid -->

	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2016 Eric Simmerman
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>â–²</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>

</body>
   </html>
