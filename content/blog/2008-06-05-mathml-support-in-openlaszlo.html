---
layout: post
title: "MathML support in OpenLaszlo"
date: 2008-06-05
type: posts
tags:
 - openlaszlo
 - softwaredevelopment
 - mathml
---

<div class='post'>
<p>I'm happy to announce that my company (<a href="http://www.tempeststrings.com">Tempest Strings Enterprises</a>) has sponsored my development and release of a <a href="http://www.w3.org/Math/">MathML</a> library for <a href="http://www.openlaszlo.org/">OpenLaszlo</a>. I'll be working through the OpenLaszlo contributor process, but imagine that it could take a considerable amount of time before you see this work in their repository since I've not yet made any effort to adhere to any coding guidelines. There is very little documentation in the source, no consistent style, and no support for any runtime except SWF. Nevertheless, I've already successfully integrated the library with a larger application and it is functioning well in our beta release.</p><br /><p>This library is based upon the <a href="http://www.learn-math.info/mathml.htm?action=formula">Flash Actionscript library</a> that ionel-alexandru (Sourceforge username) of learn-math.info donated to the public domain. I make heavy use of Alex's object tree and MathML rendering logic (thanks Alex!). I've built upon OpenLaszlo's Drawview class from their SVN trunk and added support for rendering stand-alone MathML from a datasource as well as formulas placed inline with other text.</p><p><br /></p><p>Note that the full set of MathML has not yet been implemented (ex: no support for &lt;mtable&gt;) but here are some examples of supported formulas:</p><p></p><div class="CodeRay">  <div class="code"><pre>&lt;dataset name=&quot;example1&quot;&gt;&lt;math&gt;&lt;mrow&gt;&lt;msqrt&gt;        &lt;mrow&gt;                &lt;msup&gt;                        &lt;mn&gt;2&lt;/mn&gt;                        &lt;mrow&gt;                                &lt;msup&gt;                                        &lt;mi&gt;x&lt;/mi&gt;                                        &lt;mn&gt;2&lt;/mn&gt;                                &lt;/msup&gt;                                &lt;mo&gt;+&lt;/mo&gt;                                &lt;mrow&gt;                                        &lt;mn&gt;4&lt;/mn&gt;                                        &lt;mi&gt;x&lt;/mi&gt;                                &lt;/mrow&gt;                                &lt;mo&gt;+&lt;/mo&gt;                                &lt;mn&gt;4&lt;/mn&gt;                        &lt;/mrow&gt;                &lt;/msup&gt;                &lt;mo&gt;+&lt;/mo&gt;                &lt;mrow&gt;                        &lt;mn&gt;4&lt;/mn&gt;                        &lt;mi&gt;x&lt;/mi&gt;                &lt;/mrow&gt;                &lt;mo&gt;+&lt;/mo&gt;                &lt;mn&gt;45&lt;/mn&gt;        &lt;/mrow&gt;&lt;/msqrt&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mroot linethickness=&quot;3&quot;&gt;&lt;mrow&gt;        &lt;msub&gt;                &lt;mi&gt;log&lt;/mi&gt;                &lt;mn&gt;2&lt;/mn&gt;        &lt;/msub&gt;&lt;/mrow&gt;&lt;mi&gt;5&lt;/mi&gt;&lt;/mroot&gt;&lt;/mrow&gt;&lt;/math&gt;&lt;/dataset&gt;</pre></div></div>renders with the library as:<div class='p_embed p_image_embed'><img alt="Media_httpwwwjrollerc_nhdgt" height="80" src="http://getfile1.posterous.com/getfile/files.posterous.com/import-flpo/FgiCmfCHGswdohEzpfneJkocEqgAqtgycfGxbwqwtoloiebqEuhwukxqjdys/media_httpwwwjrollerc_nHDgt.jpg.scaled500.jpg" width="382" /></div><p></p><div class="CodeRay">  <div class="code"><pre>&lt;dataset name=&quot;example2&quot;&gt;&lt;math&gt;        &lt;mrow&gt;                &lt;mo&gt; ( &lt;/mo&gt;                &lt;mfrac linethickness=&quot;0&quot; color=&quot;#006699&quot;&gt;                        &lt;mi fontstyle=&quot;bold&quot;&gt; a + b +c &lt;/mi&gt;                        &lt;mi color=&quot;#ff0000&quot;&gt; b &lt;/mi&gt;                &lt;/mfrac&gt;                &lt;mo&gt; ) &lt;/mo&gt;        &lt;/mrow&gt;        &lt;mfrac linethickness=&quot;2&quot; fontstyle=&quot;italic&quot; &gt;                &lt;mrow&gt;&lt;mi color=&quot;#00ff00&quot;&gt;3456&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mfrac&gt;                        &lt;mi&gt; a &lt;/mi&gt;                        &lt;mi fontsize=&quot;8&quot;&gt; b + c + d&lt;/mi&gt;                &lt;/mfrac&gt;                &lt;/mrow&gt;&lt;mrow&gt;&lt;mn&gt;3&lt;/mn&gt;        &lt;mfrac color=&quot;#ffff00&quot;&gt;                        &lt;mi&gt; c + d &lt;/mi&gt;                        &lt;mi color=&quot;#ff0000&quot;&gt; d &lt;/mi&gt;                &lt;/mfrac&gt;        &lt;/mrow&gt;        &lt;/mfrac&gt;&lt;/math&gt;&lt;/dataset&gt;</pre></div></div>makes use of node-level styling to render as<div class='p_embed p_image_embed'><img alt="Media_httpwwwjrollerc_nhcbg" height="115" src="http://ericsimmerman.files.wordpress.com/2008/06/media_httpwwwjrollerc_nhcbg-scaled500.jpg?w=300" width="343" /></div><p>The next one really shows off some of the fancy rendering capabilities:</p><div class="CodeRay">  <div class="code"><pre>&lt;dataset name=&quot;example3&quot;&gt;&lt;math&gt;        &lt;msubsup&gt;                &lt;mo&gt;&lt;![CDATA[???]]&gt;&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mn&gt;56&lt;/mn&gt;        &lt;/msubsup&gt;        &lt;msup&gt;                &lt;mi&gt;x&lt;/mi&gt;                &lt;mn&gt;2&lt;/mn&gt;        &lt;/msup&gt;        &lt;mtext fontstyle='italic'&gt;dx&lt;/mtext&gt;&lt;mo&gt;+&lt;/mo&gt;        &lt;msubsup&gt;                &lt;mo&gt;&lt;![CDATA[???]]&gt;&lt;/mo&gt;                &lt;mi&gt;-&lt;![CDATA[&amp;infinity;]]&gt;&lt;/mi&gt;                &lt;mi&gt;&lt;![CDATA[&amp;infinity;]]&gt;&lt;/mi&gt;        &lt;/msubsup&gt;        &lt;msup&gt;                &lt;mi&gt;e&lt;/mi&gt;                &lt;mn&gt;x&lt;/mn&gt;        &lt;/msup&gt;        &lt;mtext fontstyle='italic'&gt;dx&lt;/mtext&gt;&lt;mo&gt;+&lt;/mo&gt;        &lt;munderover&gt;                &lt;mo&gt;&lt;![CDATA[???]]&gt;&lt;/mo&gt;                &lt;mrow&gt;                        &lt;mi&gt;x&lt;/mi&gt;                        &lt;mo&gt;=&lt;/mo&gt;                        &lt;mn&gt;0&lt;/mn&gt;                &lt;/mrow&gt;                &lt;mn&gt;56&lt;/mn&gt;        &lt;/munderover&gt;        &lt;msup&gt;                &lt;mi&gt;x&lt;/mi&gt;                &lt;mn&gt;2&lt;/mn&gt;        &lt;/msup&gt;        &lt;mo&gt;+&lt;/mo&gt;        &lt;munderover&gt;                &lt;mo&gt;&lt;![CDATA[???]]&gt;&lt;/mo&gt;                &lt;mrow&gt;                        &lt;mi&gt;x&lt;/mi&gt;                        &lt;mo&gt;=&lt;/mo&gt;                        &lt;mn&gt;0&lt;/mn&gt;                &lt;/mrow&gt;                &lt;mi&gt;&lt;![CDATA[&amp;infinity;]]&gt;&lt;/mi&gt;        &lt;/munderover&gt;        &lt;msup&gt;                &lt;mi&gt;x&lt;/mi&gt;                &lt;mn&gt;2&lt;/mn&gt;        &lt;/msup&gt;        &lt;mo&gt;+&lt;/mo&gt;        &lt;munderover&gt;                &lt;mo&gt;&lt;![CDATA[???]]&gt;&lt;/mo&gt;        &lt;mrow&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;        &lt;mi&gt;n&lt;/mi&gt;&lt;/munderover&gt;&lt;mrow&gt;        &lt;mi&gt;x&lt;/mi&gt;&lt;/mrow&gt;&lt;mo&gt;+&lt;/mo&gt;        &lt;munder&gt;                &lt;mrow&gt;                        &lt;mi&gt;lim&lt;/mi&gt;                &lt;/mrow&gt;                &lt;mrow&gt;                        &lt;mi&gt;x&lt;/mi&gt;                &lt;mo&gt;&lt;![CDATA[???]]&gt;&lt;/mo&gt;                &lt;mn&gt;0&lt;/mn&gt;        &lt;/mrow&gt;&lt;/munder&gt;&lt;mrow&gt;        &lt;mi&gt;x&lt;/mi&gt;&lt;/mrow&gt;&lt;/math&gt;&lt;/dataset&gt;</pre></div></div><div class='p_embed p_image_embed'><a href="http://ericsimmerman.files.wordpress.com/2008/06/media_httpwwwjrollerc_hjpgi-scaled1000.jpg"><img alt="Media_httpwwwjrollerc_hjpgi" height="60" src="http://ericsimmerman.files.wordpress.com/2008/06/media_httpwwwjrollerc_hjpgi-scaled1000.jpg?w=300" width="500" /></a></div><p>This last example is demonstrating inline rendering with text:</p><div class="CodeRay">  <div class="code"><pre>&lt;dataset name=&quot;myFormula&quot;&gt;&lt;![CDATA[T<br/>his is an example of pseudo inline MathML:&lt;math&gt;                &lt;mrow&gt;                  &lt;mi&gt;x&lt;/mi&gt;                  &lt;mo&gt;+&lt;/mo&gt;                  &lt;msup&gt;                    &lt;mi&gt;y&lt;/mi&gt;                    &lt;mfrac&gt;                      &lt;mn&gt;2&lt;/mn&gt;                      &lt;mrow&gt;                        &lt;mi&gt;k&lt;/mi&gt;                        &lt;mo&gt;+&lt;/mo&gt;                        &lt;mn&gt;1&lt;/mn&gt;                      &lt;/mrow&gt;                    &lt;/mfrac&gt;                  &lt;/msup&gt;                &lt;/mrow&gt;                &lt;/math&gt;How do you like them apples?]]&gt;&lt;/dataset&gt;</pre></div></div><div class='p_embed p_image_embed'><a href="http://ericsimmerman.files.wordpress.com/2008/06/media_httpwwwjrollerc_hdktp-scaled1000.jpg"><img alt="Media_httpwwwjrollerc_hdktp" height="23" src="http://ericsimmerman.files.wordpress.com/2008/06/media_httpwwwjrollerc_hdktp-scaled1000.jpg?w=300" width="500" /></a></div><p>All of the formulas above were displayed using the same MathML view using the datasets listed. Here's the view declaration:</p><div class="CodeRay">  <div class="code"><pre>&lt;mathmlview font=&quot;sans-serif&quot; fontsize=&quot;24&quot; fgcolor=&quot;#000000&quot; id=&quot;math&quot; x=&quot;10&quot; y=&quot;10&quot; width=&quot;800&quot; height=&quot;500&quot; datapath=&quot;myFormula:/&quot;/&gt;</pre></div></div>The current source is released under the MIT Open Source License and available on <a href="https://github.com/ets/OpenLaszloMathML">github</a>. Enjoy!</div>
