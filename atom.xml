<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Technocracy</title>
  
  <subtitle>Posts on whatever your host deems relevant.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://ericsimmerman.com/"/>
  <updated>2022-06-14T23:36:27.310Z</updated>
  <id>http://ericsimmerman.com/</id>
  
  <author>
    <name>Eric Simmerman</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Granting a new user permissions on RDS Maria/Mysql</title>
    <link href="http://ericsimmerman.com/2019/03/10/Granting-a-new-user-permissions-on-RDS-Maria-Mysql/"/>
    <id>http://ericsimmerman.com/2019/03/10/Granting-a-new-user-permissions-on-RDS-Maria-Mysql/</id>
    <published>2019-03-11T00:48:13.000Z</published>
    <updated>2022-06-14T23:36:27.310Z</updated>
    
    <content type="html"><![CDATA[<p>You cannot use GRANT ALL for any user on an Amazon AWS RDS instance of Mysql/Maria (Aurora Mysql). When you use the GRANT ALL statement you are also attempting to provide Global Super Permissions such as File and this is not allowed on AWS RDS.</p><p>So you need to break out the permissions instead of using GRANT ALL. As of this writing, the most you can grant are:</p><p>SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, EVENT, TRIGGER </p><p>Using them in a statement such as:</p><p>GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, EVENT, TRIGGER ON my_database . * TO ‘my_user‘@’localhost’;</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;You cannot use GRANT ALL for any user on an Amazon AWS RDS instance of Mysql/Maria (Aurora Mysql). When you use the GRANT ALL statement y
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>DRY in MS Word on a Mac</title>
    <link href="http://ericsimmerman.com/2018/11/09/DRY-in-MS-Word-on-a-Mac/"/>
    <id>http://ericsimmerman.com/2018/11/09/DRY-in-MS-Word-on-a-Mac/</id>
    <published>2018-11-09T21:19:04.000Z</published>
    <updated>2022-06-14T23:36:27.309Z</updated>
    
    <content type="html"><![CDATA[<p>Lucky me had the opportunity to review &amp; adopt 60+ HITRUST policies for <a href="https://www.healthprize.com">HealthPrize</a> this week. My friendly outside council delivered the policies as individual MS Word documents. So to make the process of inserting our logo, stamping the adoption date, and generally modifying the boilerplate to fit our needs I decided to apply a little macro magic. YMMV:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">Sub HPTPolicies()</span><br><span class="line">&#x27;</span><br><span class="line">&#x27; HPTPolicies Macro</span><br><span class="line">&#x27;</span><br><span class="line">&#x27;</span><br><span class="line">    With Selection</span><br><span class="line">    .HomeKey Unit:=wdStory</span><br><span class="line">        With .Find</span><br><span class="line">        .ClearFormatting</span><br><span class="line">        .Text = &quot;[[INSERT LOGO]]&quot;</span><br><span class="line">        Do While .Execute</span><br><span class="line">            Selection.MoveRight</span><br><span class="line">            Selection.InlineShapes.AddPicture fileName:=&quot;/Volumes/mydrive/afolder/HPTlogo.png&quot;, LinkToFile:=False, SaveWithDocument:=True</span><br><span class="line">        Loop</span><br><span class="line">        End With</span><br><span class="line">    End With</span><br><span class="line">    With Selection</span><br><span class="line">    .HomeKey Unit:=wdStory</span><br><span class="line">    With .Find</span><br><span class="line">        .ClearFormatting</span><br><span class="line">        .Text = &quot;[[INSERT LOGO]]&quot;</span><br><span class="line">        Do While .Execute</span><br><span class="line">            Selection.Delete</span><br><span class="line">        Loop</span><br><span class="line">        End With</span><br><span class="line">    End With</span><br><span class="line">    Selection.Find.ClearFormatting</span><br><span class="line">    Selection.Find.Replacement.ClearFormatting</span><br><span class="line">    With Selection.Find</span><br><span class="line">        .Text = &quot;[Insert Title Appointed Person]&quot;</span><br><span class="line">        .MatchCase = True</span><br><span class="line">        .Replacement.Text = &quot;Chief Technology Officer&quot;</span><br><span class="line">    End With</span><br><span class="line">    Selection.Find.Execute Replace:=wdReplaceAll</span><br><span class="line">    Selection.Find.ClearFormatting</span><br><span class="line">    Selection.Find.Replacement.ClearFormatting</span><br><span class="line">    With Selection.Find</span><br><span class="line">        .Text = &quot;[Insert Title of `Appointed Person]&quot;</span><br><span class="line">        .MatchCase = True</span><br><span class="line">        .Replacement.Text = &quot;Chief Technology Officer&quot;</span><br><span class="line">    End With</span><br><span class="line">    Selection.Find.Execute Replace:=wdReplaceAll</span><br><span class="line">    Selection.Find.ClearFormatting</span><br><span class="line">    Selection.Find.Replacement.ClearFormatting</span><br><span class="line">        With Selection.Find</span><br><span class="line">        .Text = &quot;ADD DATE&quot;</span><br><span class="line">        .MatchCase = True</span><br><span class="line">        .Replacement.Text = &quot;November 9, 2018&quot;</span><br><span class="line">    End With</span><br><span class="line">    Selection.Find.Execute Replace:=wdReplaceAll</span><br><span class="line">    Selection.Find.ClearFormatting</span><br><span class="line">    Selection.Find.Replacement.ClearFormatting    </span><br><span class="line"></span><br><span class="line">    With ActiveDocument.ActiveWindow.View</span><br><span class="line">     .Type = wdPrintView</span><br><span class="line">     .Zoom.Percentage = 250</span><br><span class="line">    End With</span><br><span class="line">End Sub</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Lucky me had the opportunity to review &amp;amp; adopt 60+ HITRUST policies for &lt;a href=&quot;https://www.healthprize.com&quot;&gt;HealthPrize&lt;/a&gt; this we
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Setting up a Bastion host on AWS</title>
    <link href="http://ericsimmerman.com/2017/05/18/2017-05-01-setting-up-bastion-host-aws/"/>
    <id>http://ericsimmerman.com/2017/05/18/2017-05-01-setting-up-bastion-host-aws/</id>
    <published>2017-05-18T21:01:41.000Z</published>
    <updated>2022-06-14T23:36:27.309Z</updated>
    
    <content type="html"><![CDATA[<p>When setting up my latest development environment at AWS, I wanted to deploy all EC2 services on a private VPC and simply route all traffic to them through a Bastion host (aka jump host). AWS maintains a an <a href="http://docs.aws.amazon.com/quickstart/latest/linux-bastion/welcome.html">excellent CloudFormation quickstart guide &amp; template here</a> and it’s what I used to get started. After completing that guide I put a new entry for the Bastion host in my ssh config like so:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Host bastion</span><br><span class="line">  Hostname ec2-XX-XXX-XXX-XXX.compute-1.amazonaws.com</span><br><span class="line">  User ec2-user</span><br><span class="line">  IdentityFile ~/path/to/your/ssh-key.pem</span><br><span class="line">  AddKeysToAgent yes</span><br><span class="line">  UseKeychain yes  </span><br></pre></td></tr></table></figure></p><p>Those last two lines are optional - but I like to <a href="http://www.openssh.com/txt/release-7.2">leverage the Keychain on my MacBookPro</a> for storing keys and their respective passphrases. Accepting the host key into your known_hosts file can avoid some pain going forward, so I recommend connecting directly to the bastion before continuing.</p><p>To test my setup, I launched a EC2 instance in my private VPC and configured it in my ssh config like so:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Host 10.100.*.*</span><br><span class="line">  ProxyCommand ssh ec2-user@bastion -W %h:%p  </span><br><span class="line">  User ec2-user</span><br><span class="line">  IdentityFile ~/path/to/your/ssh-key.pem</span><br><span class="line">  AddKeysToAgent yes</span><br><span class="line">  UseKeychain yes  </span><br></pre></td></tr></table></figure></p><p>The magic happens on the second line with the ProxyCommand instructing SSH to jump through Bastion to route to any of the private IP addresses used in my development environment VPC. Unfortunately, my first attempt to connect failed. I poked around in the Bastion’s SSHD config and realized that the CloudFront template was so hardened that it wasn’t going to support the transparent sessions I wanted. I needed to modify /etc/ssh/sshd_config and add the following just below the PAM section:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PermitOpen any</span><br><span class="line">AllowTCPForwarding yes</span><br></pre></td></tr></table></figure><br>After making the change be certain to restart the sshd service on Bastion.</p><p>Part of the beauty of the CloudFormation design is that it uses an AutoScaling group to automatically tear down unresponsive Bastions and spin up replacements - even adapting to availability zone issues. When that happens the replacement Bastion will be configured with template defaults, so to ensure my sshd_config change would survive a failover, I copied the LaunchConfig and edited the user data to include the following:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">perl -pi -0 -w -e &#x27;s/UsePAM yes/UsePam yes\n\n# Added by ets to support transparent pass through\nPermitOpen any\nAllowTCPForwarding yes/&#x27; sshd_config</span><br></pre></td></tr></table></figure><br>Then I replaced the currently configured LaunchConfig on my AutoScaling group with my copy.</p><p>Now simply asking SSH to connect to my new services in the private VPC worked transparently!<br>To make session more efficient using this type of proxy, I added the following to my Bastion host entry in ssh config:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ControlPath ~/.ssh/cm-%r@%h:%p</span><br><span class="line">ControlMaster auto</span><br><span class="line">ControlPersist 10m</span><br></pre></td></tr></table></figure></p><p>If you’re an <a href="https://www.ansible.com/">ansible</a> fan like me, you can take advantage of that same technique with a change to ansible.cfg:<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh_args = -o ControlMaster=auto -o ControlPersist=30m</span><br><span class="line">control_path = ~/.ssh/ansible-%%r@%%h:%%p</span><br></pre></td></tr></table></figure></p><p>If you’re curious how to further protect your Bastion host with a whitelist for port 22 while also supporting users who are behind dynamic IPs then you’ll want to <a href="/2017/05/16/2017-05-16-aws-lambda-firewall/">check out my aws-lambda-firewall project</a>.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;When setting up my latest development environment at AWS, I wanted to deploy all EC2 services on a private VPC and simply route all traff
      
    
    </summary>
    
    
      <category term="AWS" scheme="http://ericsimmerman.com/tags/AWS/"/>
    
      <category term="bastion" scheme="http://ericsimmerman.com/tags/bastion/"/>
    
      <category term="jumphost" scheme="http://ericsimmerman.com/tags/jumphost/"/>
    
  </entry>
  
  <entry>
    <title>Knock first firewall for AWS Security Groups</title>
    <link href="http://ericsimmerman.com/2017/05/16/2017-05-16-aws-lambda-firewall/"/>
    <id>http://ericsimmerman.com/2017/05/16/2017-05-16-aws-lambda-firewall/</id>
    <published>2017-05-17T02:21:53.000Z</published>
    <updated>2022-06-14T23:36:27.309Z</updated>
    
    <content type="html"><![CDATA[<p>I recently <a href="./2017-05-01-setting-up-bastion-host-aws.html">setup a Bastion host</a> to secure a development environment on AWS. The Bastion only exposes port 22 for SSH and I wanted to restrict access to a whitelist of authorized IP addresses rather than leave port 22 open to the internet. Further - I wanted to restrict 443 and 80 inbound to the development environment so that only authorized users/developers could access the pre-release builds deployed there.</p><p>But I and others on my team switch IP addresses often and don’t want to hassle with manual manipulation of AWS Security Groups each time I move networks in meatspace. So I threw together <a href="https://github.com/ets/aws-lambda-firewall">a “knock for access” firewall using API Gateway &amp; lambda</a> to conveniently add and expire authorized IP addresses on the applicable Security Groups. Enjoy!</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;I recently &lt;a href=&quot;./2017-05-01-setting-up-bastion-host-aws.html&quot;&gt;setup a Bastion host&lt;/a&gt; to secure a development environment on AWS. T
      
    
    </summary>
    
    
      <category term="AWS" scheme="http://ericsimmerman.com/tags/AWS/"/>
    
      <category term="AWS lambda" scheme="http://ericsimmerman.com/tags/AWS-lambda/"/>
    
      <category term="AWS API Gateway" scheme="http://ericsimmerman.com/tags/AWS-API-Gateway/"/>
    
  </entry>
  
  <entry>
    <title>Social Tables Retrospective</title>
    <link href="http://ericsimmerman.com/2017/01/23/2017-01-23-Social-Tables-Retrospective/"/>
    <id>http://ericsimmerman.com/2017/01/23/2017-01-23-Social-Tables-Retrospective/</id>
    <published>2017-01-23T16:29:10.000Z</published>
    <updated>2022-06-14T23:36:27.308Z</updated>
    
    <content type="html"><![CDATA[<p>My last post was over a year and a half ago - just after I joined an interesting <a href="https://www.bvp.com/">Bessemer Ventures</a> backed firm in the Hospitality sector called <a href="https://www.socialtables.com">Social Tables</a>.<br>My role here has been 95% people / 5% tech and always intense. I’m retroactively posting some of the internal content I circulated as the technology leader at Social Tables - mostly high-level explanations of what my team was up to at the time.</p><p><img style="width: 650px;" src="/images/social-tables-team.jpeg"></p><p>It’s been a fun ride with unique challenges and <a href="https://healthprize.com/about-us/press-releases/healthprize-technologies-announces-new-chief-technology-officer/">as I move on to my next post</a>, I wanted to capture a few takeaways for posterity:</p><ul><li><strong>Avoid greenfield rewrites of established applications.</strong> Specifics may warrant a true rewrite - but recognize the extreme risk to all involved if that’s the selected path. While I certainly <a href="https://www.joelonsoftware.com/2000/04/06/things-you-should-never-do-part-i/">agree with what Joel says about this here</a>, I’ll add one more point of support - that a rewrite is a fight on two fronts. It’s up against the formidable foes of <a href="https://smile.amazon.com/Who-Moved-My-Cheese-Amazing/dp/0399144463">customer adoption of a new thing</a> and the golden project phenomenon - where a golden (too big to fail) project’s scope continually increases without bound.</li><li><strong>Hire for squads and fire quickly on non-fit.</strong> My worst HR calls at Social Tables involved attempts to reassign an employee to a different team in an attempt to establish fit. This is especially difficult where the employee in question was inherited as opposed to hired under my watch. There’s a strong desire to give the inherited employee multiple chances to demonstrate fit. Don’t do it - if the employee is not a good enough for the first team she joins (or is assigned to) then do her and the rest of the team a favor - cut her loose with dignity. Such an evaluation might rightly not be considered fair - c’est la vie.</li><li><strong>Adopt 2-3 cutting-edge technologies, but no more.</strong> This worked really well for us - especially on the recruiting tip. Our best hires came through our broadcast of niche (at the time) tech such as WebGL, React, and RethinkDB. But it’s a double-edged sword. Our worst tech adoption failures came from naive pushes into Falcor, Dynamo, and Horizon.</li></ul><p>Onward &amp; Upward!</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;My last post was over a year and a half ago - just after I joined an interesting &lt;a href=&quot;https://www.bvp.com/&quot;&gt;Bessemer Ventures&lt;/a&gt; bac
      
    
    </summary>
    
    
      <category term="AWS" scheme="http://ericsimmerman.com/tags/AWS/"/>
    
      <category term="bastion" scheme="http://ericsimmerman.com/tags/bastion/"/>
    
      <category term="jumphost" scheme="http://ericsimmerman.com/tags/jumphost/"/>
    
  </entry>
  
  <entry>
    <title>Explaining Docker to suits</title>
    <link href="http://ericsimmerman.com/2016/05/14/2016-03-22-Explaining-Docker-to-Suits/"/>
    <id>http://ericsimmerman.com/2016/05/14/2016-03-22-Explaining-Docker-to-Suits/</id>
    <published>2016-05-14T23:18:04.000Z</published>
    <updated>2022-06-14T23:36:27.307Z</updated>
    
    <content type="html"><![CDATA[<p>I posted the following on an internal blog at Social Tables in an attempt to explain a bit about what our Software Engineering group was up to at the time.</p><hr><p>What’s Docker you say? Glad you asked…</p><h2 id="What’s-Docker"><a href="#What’s-Docker" class="headerlink" title="What’s Docker?"></a>What’s Docker?</h2><p>Docker’s a technology that allows us to wrap our applications &amp; services as self-contained deliverables that are isolated from the host operating system upon which they are deployed.</p><h2 id="What’s-Docker-…-in-English-preferably-with-pictures"><a href="#What’s-Docker-…-in-English-preferably-with-pictures" class="headerlink" title="What’s Docker … in English (preferably with pictures)?"></a>What’s Docker … in English (preferably with pictures)?</h2><p>So…visualize a long-haul shipping container.<br><img style="width: 300px;" src="/images/docker-1.jpg"></p><p>Appreciate how much easier it makes moving cargo between ship, train, and truck.</p><p><img style="width: 300px;" src="/images/docker-2.jpg"><br><img style="width: 300px;" src="/images/docker-3.jpg"><br><img style="width: 300px;" src="/images/docker-4.jpg"></p><p>In a similar way, Docker helps us package our software into shipping containers and we can then run that software unchanged on a laptop, a dedicated server, or a cloud platform.</p><h2 id="So-that’s-a-good-thing"><a href="#So-that’s-a-good-thing" class="headerlink" title="So that’s a good thing?"></a>So that’s a good thing?</h2><p>Yes.  Plus Docker’s mascot is a cute whale.<br><img style="width: 300px;" alt="Who doesn't like a cute whale?" src="/images/docker-5.png"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;I posted the following on an internal blog at Social Tables in an attempt to explain a bit about what our Software Engineering group was 
      
    
    </summary>
    
    
      <category term="Docker" scheme="http://ericsimmerman.com/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>Explaining Query Tuning to suits</title>
    <link href="http://ericsimmerman.com/2016/04/20/2016-04-20-Explaining-Query-Tuning-to-Suits/"/>
    <id>http://ericsimmerman.com/2016/04/20/2016-04-20-Explaining-Query-Tuning-to-Suits/</id>
    <published>2016-04-20T23:18:04.000Z</published>
    <updated>2022-06-14T23:36:27.308Z</updated>
    
    <content type="html"><![CDATA[<p>I posted the following on an internal blog at Social Tables in an attempt to explain a bit about what our Software Engineering group was up to at the time.</p><hr><p>Today we’re going to talk briefly about query tuning - a black art in the craft of software engineering that <a href="http://dl.acm.org/citation.cfm?doid=582095.582099">predates the Internet</a> but is still incredibly relevant. I don’t mean relevant in the “you should really pay attention to national politics” sense.  I mean relevant as in “this can (when done poorly) wreck your whole day.”</p><h2 id="What’s-query-tuning"><a href="#What’s-query-tuning" class="headerlink" title="What’s query tuning?"></a>What’s query tuning?</h2><p>A query is a request for information from a database. It can be as simple as “find the email address of the Social Tables user named Inigo Montoya”, or more complex like “find the ASP of all Social Tables opportunities closed on Fridays that followed a Thursday evening Happy Hour.”</p><p>Since database structures are complex, in most cases, and especially for not-very-simple queries, the needed data for a query can be collected from a database by accessing it in different ways, through different data-structures, and in different orders. Each different way typically requires different processing time. Processing times of the same query may have large variance, from a fraction of a second to hours, depending on the way selected. The purpose of query tuning, is to find the way to process a given query in minimum time.</p><h2 id="What’s-query-tuning-…-in-English-preferably-with-pictures-and-how-can-it-wreck-my-whole-day"><a href="#What’s-query-tuning-…-in-English-preferably-with-pictures-and-how-can-it-wreck-my-whole-day" class="headerlink" title="What’s query tuning … in English (preferably with pictures) and how can it wreck my whole day?"></a>What’s query tuning … in English (preferably with pictures) and how can it wreck my whole day?</h2><p>Query tuning is an effort to minimize the work performed while answering a query. If done poorly, database queries execute slowly and your application responds slowly. When your application responds slowly bad things happen - like Mary posting a screenshot to #devops (aka your whole day is wrecked).</p><p>Last week, Michael Dumont spent some time tuning several queries in our platform and his visuals of that effort are worth &gt; 1,000 words:</p><p>Orange = a measure of platform activity<br>Blue = a measure of how hard the database is working<br><img src="/images/query-tuning-1.png"></p><p>Note: unlike Social Tables’ Engineers, our database refuses to work harder than 100% … so those blue peaks are signs of unhappy Social Tables users.</p><p>Here are the same measurements after tuning:<br><img src="/images/query-tuning-2.png"></p><p>Happier database === Happier users</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;I posted the following on an internal blog at Social Tables in an attempt to explain a bit about what our Software Engineering group was 
      
    
    </summary>
    
    
      <category term="query tuning" scheme="http://ericsimmerman.com/tags/query-tuning/"/>
    
  </entry>
  
  <entry>
    <title>Explaining SDF to suits</title>
    <link href="http://ericsimmerman.com/2016/04/06/2016-04-06-Explaining-SDF-to-Suits/"/>
    <id>http://ericsimmerman.com/2016/04/06/2016-04-06-Explaining-SDF-to-Suits/</id>
    <published>2016-04-06T23:18:04.000Z</published>
    <updated>2022-06-14T23:36:27.307Z</updated>
    
    <content type="html"><![CDATA[<p>I posted the following on an internal blog at Social Tables in an attempt to explain a bit about what our Software Engineering group was up to at the time.</p><hr><p>We’ve got a special subject this issue to take the edge off that geek-withdrawal : “Drawing Text with Signed Distance Fields” or using SDF text rendering for those in the know.</p><h2 id="What’s-SDF"><a href="#What’s-SDF" class="headerlink" title="What’s SDF?"></a>What’s SDF?</h2><p>Signed distance field (SDF) is a technique for rendering bitmap fonts without jagged edges even at high magnifications. It was first introduced in 2007 with <a href="http://www.valvesoftware.com/publications/2007/SIGGRAPH2007_AlphaTestedMagnification.pdf">this bit of light reading by Valve</a> and couples the use of a bitmap and glyphs with a GLSL shader that can sample and sharpen said glyphs.</p><h2 id="What’s-SDF-…-in-English-preferably-with-pictures"><a href="#What’s-SDF-…-in-English-preferably-with-pictures" class="headerlink" title="What’s SDF … in English (preferably with pictures)?"></a>What’s SDF … in English (preferably with pictures)?</h2><p>So…you know what sounds easy but is really really hard? Drawing legible letters in Venue Mapper. Wait - what? Why’s that hard you ask?</p><p>Here’s a screenshot of “Social Tables” rendered in 12pt font by Microsoft Word:</p><p><img src="/images/sdf-1.png"></p><p>Completely legible. But here’s that exact same image after I zoom in a few times:</p><p><img src="/images/sdf-2.png"></p><p>Not so great. Possibly legible but if we rendered text like this as users zoom in and out in Venue Mapper we’d have to bundle subscriptions with aspirin.</p><p>SDF is a technique we’ve just begun using to more efficiently render text in Venue Mapper 3 - it performs better (app is faster) and looks prettier than the techniques we’ve used previously.</p><p>Here’s a <a href="https://youtu.be/8yt7kSftNU4">movie of SDF in action in VM3 courtesy of our own Van Drunen</a>.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;I posted the following on an internal blog at Social Tables in an attempt to explain a bit about what our Software Engineering group was 
      
    
    </summary>
    
    
      <category term="Signed Distance Fields" scheme="http://ericsimmerman.com/tags/Signed-Distance-Fields/"/>
    
  </entry>
  
  <entry>
    <title>MySQL Identifying Blocking Transactions</title>
    <link href="http://ericsimmerman.com/2015/08/10/2015-08-10-mysql-identifying-blocking-transactions/"/>
    <id>http://ericsimmerman.com/2015/08/10/2015-08-10-mysql-identifying-blocking-transactions/</id>
    <published>2015-08-10T16:29:15.000Z</published>
    <updated>2022-06-14T23:36:27.306Z</updated>
    
    <content type="html"><![CDATA[<p>Recording this incredibly helpful query from <a href="https://stackoverflow.com/questions/22046390/still-seeing-lock-wait-timeouts-when-deleting-from-large-tables-using-primary-ke/22131972#22131972">Bill Karwin’s post to SO</a><br>You can find the source query that’s blocking your DELETE by using the INFORMATION_SCHEMA.LOCK_WAITS and INNODB_TRX tables.<br><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">SELECT r.trx_id waiting_trx_id,  </span><br><span class="line">       r.trx_mysql_thread_id waiting_thread,</span><br><span class="line">       r.trx_query waiting_query,</span><br><span class="line">       b.trx_id blocking_trx_id,</span><br><span class="line">       b.trx_mysql_thread_id blocking_thread,</span><br><span class="line">       b.trx_query blocking_query</span><br><span class="line">   FROM       information_schema.innodb_lock_waits w</span><br><span class="line">   INNER JOIN information_schema.innodb_trx b  ON  </span><br><span class="line">    b.trx_id = w.blocking_trx_id</span><br><span class="line">  INNER JOIN information_schema.innodb_trx r  ON  </span><br><span class="line">    r.trx_id = w.requesting_trx_id;</span><br></pre></td></tr></table></figure><br>See more information at <a href="http://dev.mysql.com/doc/refman/5.5/en/innodb-information-schema.html#innodb-information-schema-examples">http://dev.mysql.com/doc/refman/5.5/en/innodb-information-schema.html#innodb-information-schema-examples</a>, under “Example 14.2 Identifying Blocking Transactions”.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Recording this incredibly helpful query from &lt;a href=&quot;https://stackoverflow.com/questions/22046390/still-seeing-lock-wait-timeouts-when-d
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Fix YAML parsing errors in WebGen</title>
    <link href="http://ericsimmerman.com/2015/01/07/2015-01-07-fix-yaml-parsing-errors-in-webgen/"/>
    <id>http://ericsimmerman.com/2015/01/07/2015-01-07-fix-yaml-parsing-errors-in-webgen/</id>
    <published>2015-01-07T17:20:34.000Z</published>
    <updated>2022-06-14T23:36:27.306Z</updated>
    
    <content type="html"><![CDATA[<p>After a clean install of Mac OS X Yosemite I’ve had to reinstall much of my development environment. This process was mostly beneficial as I moved to the latest and greatest tooling but several of my static websites leverage the prior major version of <a href="http://webgen.gettalong.org/index.html">Thomas Leitner’s Webgen</a> and getting version 0.5.x up and running has been a challenge.  </p><p>After working through several Ruby &amp; Gem issues I ran into a particularly opaque error when executing webgen on a project that previously generated without issue: “(<unknown>): found character that cannot start any token while scanning for the next token”</p><p>This error is usually a sign that your content contains tab characters but I’d already ensured that wasn’t the case.  Instead of diving deep into the workings of the libraries at play I was able to use <a href="https://groups.google.com/d/msg/webgen-users/wYYWrwljJ1Y/Q8G4SzG_lEcJ">this post from Thomas to resolve the issue</a> by reverting to the syck TAML implementation instead of its replacement.  Problem solved!</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;After a clean install of Mac OS X Yosemite I’ve had to reinstall much of my development environment. This process was mostly beneficial a
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Resolving H2 table lock during JUnitRunner test</title>
    <link href="http://ericsimmerman.com/2014/02/01/2014-02-01-resolving-h2-table-lock-during-junitrunner-test/"/>
    <id>http://ericsimmerman.com/2014/02/01/2014-02-01-resolving-h2-table-lock-during-junitrunner-test/</id>
    <published>2014-02-01T20:36:00.000Z</published>
    <updated>2022-06-14T23:36:27.305Z</updated>
    
    <content type="html"><![CDATA[<p>After adding a new test to a project that uses Play Framework 1.2.X and thus leverages H2 for Junit functional testing, I began encountering a table lock during setup() when the framework was attempting to delete the contents of an entity table.</p><p>I initially blamed the lock on bad model design and wasted a significant amount of time tweaking JPA entity relationships and corresponding CRUD operations in an attempt to resolve it. I ultimately resolved the issue after realizing it was in fact caused by a badly designed test.</p><p>I was directly modifying entities within the transaction that wrapped my functional test and then emulating API calls that relied upon the state of those same entities. Long story short, my test was attempting something similar to this:</p><pre><code>class FunctionalTest &#123; //Runs entire test in the same transaction    setup()&#123;        //reset H2 datastore in an distinct transaction    &#125;    atest()&#123;         User u = User.findById(1);        u.address = new Address();        u.save();        //test continues    &#125;    btest()&#123;        Request req = GET(&quot;/user/1&quot;);    &#125;&#125;</code></pre><p>In my contrived example above, after Junit runs atest() and just before running btest() - it will call setup() and attempt to reset the database in a separate transaction. But, atest() claimed a lock for insert on User and in H2 that locks the entire table by default thus setup() will be unable to reset the User table and will fail with a lock timeout.</p><p>To resolve this - you’ll either need to redesign your test to avoid manipulating entities directly in the testcase or run each test in a distinct transaction. </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;After adding a new test to a project that uses Play Framework 1.2.X and thus leverages H2 for Junit functional testing, I began encounter
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Moved again ... this time to github.io</title>
    <link href="http://ericsimmerman.com/2013/11/26/2013-11-26-moved-again-dot-dot-dot-this-time-to-github-dot-io/"/>
    <id>http://ericsimmerman.com/2013/11/26/2013-11-26-moved-again-dot-dot-dot-this-time-to-github-dot-io/</id>
    <published>2013-11-27T00:22:00.000Z</published>
    <updated>2022-06-14T23:36:27.305Z</updated>
    
    <content type="html"><![CDATA[<p>Blogger was just too ugly &amp; clumsy so I used a fork of <a href="https://gist.github.com/juniorz/1564581">juniorz’s import.rb</a> to migrate from blogger to Octopress. Here’s my fork:</p><script src="https://gist.github.com/ets/7662898.js"></script><p>I found <a href="https://gist.github.com/MeetDom/1713910">MeetDom’s gist helpful while installing all the dependencies</a> required by the import script.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Blogger was just too ugly &amp;amp; clumsy so I used a fork of &lt;a href=&quot;https://gist.github.com/juniorz/1564581&quot;&gt;juniorz’s import.rb&lt;/a&gt; to m
      
    
    </summary>
    
    
      <category term="Blogger" scheme="http://ericsimmerman.com/tags/Blogger/"/>
    
      <category term="Octopress" scheme="http://ericsimmerman.com/tags/Octopress/"/>
    
  </entry>
  
  <entry>
    <title>Plesk 11 Upgrade Unable to run Perl scripts in cgi-bin</title>
    <link href="http://ericsimmerman.com/2013/10/29/2013-10-29-plesk-11-upgrade-unable-to-run-perl/"/>
    <id>http://ericsimmerman.com/2013/10/29/2013-10-29-plesk-11-upgrade-unable-to-run-perl/</id>
    <published>2013-10-29T04:00:00.000Z</published>
    <updated>2022-06-14T23:36:27.304Z</updated>
    
    <content type="html"><![CDATA[After an upgrade to Plesk 11, my Perl scripts  located under cgi-bin/ for a specific domain were not executing properly.Requests generated HTTP response code 500 and my error logs showed the unhelpful message "Premature end of script headers"I verified all permissions and even disabled / re-enabled cgi-bin support through Plesk which installs a test script under cgi-bin/test/test.cgiEven the test script failed to run. It also generated the message "Premature end of script headers: test.cgi"I eventually resolved the issue with two changes:<br><br><ol><li>The domain's root folder in /var/www/vhosts was not owned by the domain user. So I fixed that with a chown command.</li><li>Within the Plesk control panel, I had to disable "Perl" support and enable "CGI" support to get my perl scripts with the ".pl" extension to run under cgi-bin</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        
After an upgrade to Plesk 11, my Perl scripts  located under cgi-bin/ for a specific domain were not executing properly.
	Requests generate
      
    
    </summary>
    
    
      <category term="perl" scheme="http://ericsimmerman.com/tags/perl/"/>
    
      <category term="plesk" scheme="http://ericsimmerman.com/tags/plesk/"/>
    
  </entry>
  
  <entry>
    <title>Using iStat 2.x on Mountain Lion</title>
    <link href="http://ericsimmerman.com/2013/04/29/2013-04-29-using-istat-2x-on-mountain-lion/"/>
    <id>http://ericsimmerman.com/2013/04/29/2013-04-29-using-istat-2x-on-mountain-lion/</id>
    <published>2013-04-29T04:00:00.000Z</published>
    <updated>2022-06-14T23:36:27.304Z</updated>
    
    <content type="html"><![CDATA[<div class='post'>Shawn Hooton wrote a piece on <a href="http://codingogre.wordpress.com/2011/09/12/fix-istat-menus-version-2-to-work-with-os-x-lion/">how to use iStat 2.x on Mountain Lion</a> that I've used several times at this point. <a href="http://codingogre.wordpress.com/2011/09/12/fix-istat-menus-version-2-to-work-with-os-x-lion/">Linking to it here </a>for posterity.</div>]]></content>
    
    <summary type="html">
    
      
      
        
&lt;div class=&#39;post&#39;&gt;
Shawn Hooton wrote a piece on &lt;a href=&quot;http://codingogre.wordpress.com/2011/09/12/fix-istat-menus-version-2-to-work-with
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Moved to Blogger</title>
    <link href="http://ericsimmerman.com/2013/03/07/2013-03-07-moved-to-blogger/"/>
    <id>http://ericsimmerman.com/2013/03/07/2013-03-07-moved-to-blogger/</id>
    <published>2013-03-07T05:00:00.000Z</published>
    <updated>2022-06-14T23:36:27.304Z</updated>
    
    <content type="html"><![CDATA[<div class='post'>I started this <a href="http://www.jroller.com/agileanswers/">Agile Answers blog on jroller back in 2006</a> and I lost some of the older content in my move to Posterous. Sadly Twitter is killing Posterous so I've had to move again...this time to Google's Blogger. Alas - I've lost all the Posterous comments and a lot of formatting in the process. As if&nbsp;<a href="https://twitter.com/theSeanCook">The Sean Cook</a>&nbsp;working there weren't reason enough, I now have one more reason to hate Twitter.<br /><br /><br /></div>]]></content>
    
    <summary type="html">
    
      
      
        
&lt;div class=&#39;post&#39;&gt;
I started this &lt;a href=&quot;http://www.jroller.com/agileanswers/&quot;&gt;Agile Answers blog on jroller back in 2006&lt;/a&gt; and I lost 
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Compressing MySQL client-server communication with Play Framework</title>
    <link href="http://ericsimmerman.com/2012/12/19/2012-12-19-compressing-mysql-client-server/"/>
    <id>http://ericsimmerman.com/2012/12/19/2012-12-19-compressing-mysql-client-server/</id>
    <published>2012-12-19T05:00:00.000Z</published>
    <updated>2022-06-14T23:36:27.304Z</updated>
    
    <content type="html"><![CDATA[<div class='post'><p><span> </span><a href="http://foldergrid.com">FolderGrid</a> provides a RESTful api that often services requests where over 90% of the entire response time is spent pulling data from a MySQL instance. I was recently working to reduce overall response time for some long running transactions in that bucket.</p><p><span> </span>After optimizing my queries and my database caching - I looked at network transfer time from the dedicated MySQL server to the mysql client on the application server. &nbsp;Simply enabling MySQL zlib compression resulted in a 3x performance boost for many of the larger resultsets.&nbsp;</p><p><span> </span>To configure your Play Framework connection pool to enable MySQL client-server zlib compression, you'll need to use the explicitly defined "db.url" instead of the shortcut "db" configuration key. Your key should look something like this:</p><p>db.url=jdbc:mysql://remotehost/dbname?useUnicode=yes&amp;characterEncoding=UTF-8&amp;connectionCollation=utf8_general_ci&amp;useCompression=true</p><p>&nbsp;</p><p>&nbsp;</p></div>]]></content>
    
    <summary type="html">
    
      
      
        
&lt;div class=&#39;post&#39;&gt;
&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;a href=&quot;http://foldergrid.com&quot;&gt;FolderGrid&lt;/a&gt; provides a RESTful api that often services requests wher
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>When not to front your application with nginx HttpProxyModule</title>
    <link href="http://ericsimmerman.com/2012/11/19/2012-11-19-when-not-to-front-your-application-with/"/>
    <id>http://ericsimmerman.com/2012/11/19/2012-11-19-when-not-to-front-your-application-with/</id>
    <published>2012-11-19T05:00:00.000Z</published>
    <updated>2022-06-14T23:36:27.303Z</updated>
    
    <content type="html"><![CDATA[<div class='post'><p>Throwing nginx (or Apache or lighthttpd) in front of other application stacks is so common that we often don't think twice about the possible costs. This bit me over the weekend when I casually threw up nginx for SSL termination and configured HttpProxyModule to proxy to my Play Framework driven application.</p><p>I failed to heed the first section in the <a href="http://wiki.nginx.org/HttpProxyModule">HttpProxyModule</a> docs. See that note about how "<strong>the entire client request will be buffered in nginx before being passed on to the backend proxied servers</strong>" ?</p><p>That's one note you are going to care about when you're handling large requests and can't figure out why your application is so slow to respond to them.</p><p>RTM&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div>]]></content>
    
    <summary type="html">
    
      
      
        
&lt;div class=&#39;post&#39;&gt;
&lt;p&gt;Throwing nginx (or Apache or lighthttpd) in front of other application stacks is so common that we often don&#39;t think 
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Supporting multiple file upload runtimes with pupload inside ExtJS 4</title>
    <link href="http://ericsimmerman.com/2012/08/07/2012-08-07-supporting-multiple-file-upload/"/>
    <id>http://ericsimmerman.com/2012/08/07/2012-08-07-supporting-multiple-file-upload/</id>
    <published>2012-08-07T04:00:00.000Z</published>
    <updated>2022-06-14T23:36:27.303Z</updated>
    
    <content type="html"><![CDATA[<div class='post'><p>The reference client I built for <a href="http://foldergrid.com/api/index.html" title="FolderGrid API">FolderGrid's API </a>is a zero footprint web client created using <a href="http://www.sencha.com/products/extjs/">ExtJS 4</a>. I wanted to support drag &amp; drop file uploads for advanced browsers but degrade nicely all the way back to IE6 for those poor lost souls stuck with tech from the last decade. So I integrated <a href="http://www.plupload.com/">plupload</a> and bound the two together with some jquery glue.</p><p>The results are working well in production and <a href="https://bitbucket.org/ets/foldergrid-client-extjs/overview" title="FolderGrid Web Client">the client itself is open &amp; licensed under GPL v3</a> per the terms of ExtJS 4. So if you are interested in copying &amp; extending - have at it.</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p></div>]]></content>
    
    <summary type="html">
    
      
      
        
&lt;div class=&#39;post&#39;&gt;
&lt;p&gt;The reference client I built for &lt;a href=&quot;http://foldergrid.com/api/index.html&quot; title=&quot;FolderGrid API&quot;&gt;FolderGrid&#39;s A
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Automatically find trailing commas in your javascript project</title>
    <link href="http://ericsimmerman.com/2012/08/05/2012-08-05-automatically-find-trailing-commas-in/"/>
    <id>http://ericsimmerman.com/2012/08/05/2012-08-05-automatically-find-trailing-commas-in/</id>
    <published>2012-08-05T04:00:00.000Z</published>
    <updated>2022-06-14T23:36:27.303Z</updated>
    
    <content type="html"><![CDATA[<div class='post'><p>These are simply updated instructions based upon <a href="http://www.amaxus.com/cms-blog/automatically-finding-javascript-errors-ie7">the original Amaxus writeup here</a>.</p><ul><li>Install Rhino &nbsp;(I used "port install rhino")</li><li>Grab the <a href="https://raw.github.com/mikewest/jslint-utils/master/lib/rhinoed_jslint.js">Rhinoized JSLint script here</a>.</li><li>Create a script named checkForJsErrors.sh with the following two lines:</li></ul><p>echo $1<br />rhino&nbsp;rhinoed_jslint.js $1 | fgrep -e 'Unexpected' --color=always&nbsp;</p><ul><li>Create an alias in your bashrc</li></ul><p><p>alias checkjs='find . -name '''*.js''' -exec ~/bin/checkForJsErrors.sh {} ;'</p><p /><div>Now when you execuate that alias in your project's root directory - all of your .js files will be scanned for trailing commas.</div><p /><div>You're welcome.</div></p><p>&nbsp;</p></div>]]></content>
    
    <summary type="html">
    
      
      
        
&lt;div class=&#39;post&#39;&gt;
&lt;p&gt;These are simply updated instructions based upon &lt;a href=&quot;http://www.amaxus.com/cms-blog/automatically-finding-javasc
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>orphanRemoval issues in Play Framework &#39;collection owner not associated with session&#39;</title>
    <link href="http://ericsimmerman.com/2012/08/03/2012-08-03-orphanremoval-issues-in-play-framework/"/>
    <id>http://ericsimmerman.com/2012/08/03/2012-08-03-orphanremoval-issues-in-play-framework/</id>
    <published>2012-08-03T04:00:00.000Z</published>
    <updated>2022-06-14T23:36:27.303Z</updated>
    
    <content type="html"><![CDATA[<div class='post'><p>I was just burned by an issue in Play Framework's JPA support of orphanRemovals. The issue manifests as a "collection owner not associated with session" JPAException within Play Framework 1.2.x &nbsp;- it was supposed to be <a href="https://play.lighthouseapp.com/projects/57987/tickets/1503-nested-onetomany-relationships-with-orphanremoval-fails-to-commit">addressed in 1.2.5 with this patch,</a> but I'm running 1.2.5 and am still running into it.</p><p>I didn't take the time to diagnose or file a report - for now I'm punting by restricting the use of 'orphanRemoval'.</p></div>]]></content>
    
    <summary type="html">
    
      
      
        
&lt;div class=&#39;post&#39;&gt;
&lt;p&gt;I was just burned by an issue in Play Framework&#39;s JPA support of orphanRemovals. The issue manifests as a &quot;collection
      
    
    </summary>
    
    
  </entry>
  
</feed>
